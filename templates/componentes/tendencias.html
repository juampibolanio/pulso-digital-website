{% load static %}

<!-- Popular News Start -->
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/tendencias.css' %}">
{% endblock %}

<div class="trending-section mb-3">
    <div class="section-title mb-0">
        <h4 class="m-0 text-uppercase font-weight-bold position-relative">Tendencias</h4>
    </div>
    
    <div class="trending-container p-3">
        {% for noticia in noticias_trending %}
        <div class="trending-item">
            <div class="trending-image">
                {% if noticia.imagenes.first %}
                    <img src="{{ noticia.imagenes.first.imagen.url }}" alt="{{ noticia.titulo }}">
                {% else %}
                    <img src="{% static 'img/news-110x110-1.jpg' %}" alt="{{ noticia.titulo }}">
                {% endif %}
            </div>
            
            <div class="trending-content">
                <div class="trending-meta">
                    {% for categoria in noticia.categorias.all %}
                        <a class="trending-category" href="{% url 'apps.noticias:categoria_por_id' categoria.categoria_id %}">{{ categoria.nombre }}</a>
                    {% endfor %}
                    <a class="trending-date" href="#">
                        <small>{{ noticia.fecha|date:"M d, Y" }}</small>
                    </a>
                </div>
                
                <a class="trending-title" href="{% url 'apps.noticias:detalle_noticia' noticia.noticia_id %}">
                    {{ noticia.titulo|truncatechars:45 }}
                </a>
            </div>
        </div>
        {% empty %}
        <div class="trending-empty">
            <i class="fas fa-newspaper"></i>
            <p class="mb-0">No hay noticias en tendencia en este momento.</p>
        </div>
        {% endfor %}
    </div>
</div>
<!-- Popular News End -->